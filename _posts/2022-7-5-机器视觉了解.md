```
layout: post
title: 机器视觉系统概述
categories: 机器视觉
date: 2022-7-5 13:11:00 +0800
```

# 机器视觉系统概述
机器视觉和计算机视觉区别:
+ 计算机视觉重点在于对图像的分析，重点在于从图像中提取特征并进行处理和分析，从而得到一个结果。计算机视觉重视对理论算法的研究，目前在实际工程应用中还有一定的局限。
+ 机器视觉侧重于观测目标的特征、尺寸和形态等信息，目的在于根据判断的结果做出接下来的行为。机器视觉更侧重实际应用，强调算法的实时性、高效率和高精度。

## 工作流程
机器视觉系统的工作流程主要为:
光源照射--->检测对象--->相机采集图像--->采集卡传输图像--->(视觉图像分析软件进行分析处理)--->输出通信指令给硬件设备

## 相机
### 分类
1. 按芯片类型:CCD/CMOS
2. 按传感器结构特征:
   1. 面阵相机：像素矩阵拍摄，每次采集若干行的图像并以帧的方式输出；可以固定拍摄
   2. 线阵相机: 将图像逐行输出，高度只有1个像素。传感器只有一行感光元素，使高扫描频率和高分辨率成为可能。适合检测图像区域是条形或幅面宽、运动速度快、精度要求高的物体；需要移动产品或相机进行拍摄
3. 按曝光方式:
   1. 全局曝光(global shutter):芯片所有行同时开始曝光，同时结束曝光
   2. 卷帘曝光(rolling shutter):又称逐行曝光，从第一行开始曝光，一个周期之后第二行才开始曝光，这样可以达到更高的频率。
4. 按输出信号的方式:
   1. 模拟相机:输出模拟电压信号
   2. 数字相机:输出数字信号
5. 按扫描方式:隔行扫描(模拟相机)/逐行扫描(数字相机)
6. 相机接口分类:
   1. GIGE：千兆以太网接口，配合千兆以太网卡使用，可以利用网线给相机设备直流供电，适合远距离传输
   2. USB: 成本低廉，支持热插拔，只适合近距离传输
   3. Camera Link：传输速度快，支持高速传输、抗干扰性强、功耗低，但价格高昂，且需要配合。立的板卡使用。
   4. Firewire:IEEE 1394标准的别名，苹果公司主导开发的一种串行通信标准，传输速度快，传输距离短。

	可以综合以下几点选择相机的接口:
	- 传输带宽（图像尺寸*帧率，Camera Link传输速度最高）  
    - 传输距离（大于10米选网口） 
    - 即插即用（网口/USB 3.0） 
    - 实时性（Camera Link/Camera Link/USB 3.0） 
    - 成本（Camera Link需独立的板卡，成本最高）


### 参数
1. 分辨率:每次采集的像素个数
2. 像素（像元）尺寸:单个像元的实际大小，单位一般是mm
   分辨率(像元数量)和像素尺寸(像元大小)共同决定了相机芯片的尺寸:
	相机芯片尺寸=相机分辨率*像素大小

	**注意**：在电子元件成像领域，1英寸=16mm（常规换算标准1英寸=25.4mm）
3. 帧率:对于面阵相机，帧率为每1s采集的帧数（frame per socond，fps），对于点阵相机，帧率为每1s采集的行数（KHz）。
4. 快门速度:快门开启的有效时间长度，一般到10微秒，高速相机会更快。
	高速的电子快门(曝光时间较短)需要有充足的光照才能保证图像正常的灰度；如果曝光时间过长，对于运动的物体，图像可能较为模糊。

5. 像素深度:像素数据的位数，定义了灰度由暗到亮的灰阶数，如深度为8bit可展现的灰阶为2^8=256个
   + 无彩色图像的像素深度为8bit
   + 彩色图像(rgb图像)的像素深度为24bit，每8bit表示一种颜色(红、绿、蓝)，一个像素可以表现的颜色种类有2^8*2^8*2^8约等于1667万多种。

6. 图像占用空间大小:
   图像占用比特数=图像分辨率*像素位深
   占用字节数=比特数/8
7. 传输带宽:每秒传输的数据量大小
   带宽=图像尺寸（分辨率) * 位深 * 帧率
   标准PAL制为25fps



## 镜头


镜头的几个概念:
1. 焦距:透镜中心到焦点的距离
2. 光圈:相机镜头中可以改变中间孔大小的机械装置，因此光圈也称为**相对通光孔径**。
	D为光圈直径，f为焦距，D/f称为镜头的相对通光孔径，一般为方便把它的倒数f/D称为光圈数，也称为F数,如果D/f=1:2，则其光圈为F2.0。
3. 景深(Depth of field): 使被摄物体产生较为清晰影像的最近点至最远点的距离就是景深
	
焦距、光圈、拍摄距离对景深的影响:
+ 光圈越大，景深越小
+ 焦距越长，景深越小
+ 拍摄距离越远，景深越大

4. 视场(Field Of View):在光学工程中视场一般指代视场角，视场角的大小决定了光学仪器的视野范围
	视场角的计算:
	[![jYq3dI.png](https://s1.ax1x.com/2022/07/05/jYq3dI.png)](https://imgtu.com/i/jYq3dI)
5. 光学放大率:像的尺寸/实际物体的尺寸=CCD尺寸/视场大小
6. 畸变:光学透镜固有的透视失真，不能消除只能改善。
   + 正畸变:也叫桶形畸变，成像呈桶型膨胀状态。使用广角镜头时最容易出现。
   + 负畸变:也叫枕形畸变，成像呈现向中间收缩的状态。使用长焦镜头时最容易出现。
   + 线性畸变:又称线性失真，当试图近距离拍摄高大的直线结构时容易出现。
7. 工业镜头分类：
   
| 分类             | 依据类型                           |
| :--------------- | :--------------------------------- |
| 焦距类型         | 固定焦距、可变焦距                 |
| 焦距大小         | 标准、广角、望远、鱼眼             |
| 光圈             | 固定光圈式、手动光圈式、自动光圈式 |
| 镜头伸缩调整方式 | 电动伸缩镜头、手动伸缩镜头         |


