---
layout: post
date: 2022-02-03 17:55:24 +0800
author: solitaryclown
title: Redis操作
categories: database
tags: Redis
# permalink: /:categories/:title.html
excerpt: "Redis操作"
---
* content
{:toc}

# 1. Redis操作
## 1.1. help
`help`命令可以查询redis中所有命令的用法

## 1.2. value类型
### 1.2.1. string 
`help @string`可以查看string类型的所有操作命令。

常用操作：  

| 命令格式                        | 描述                           |
| :------------------------------ | :----------------------------- |
| `SET key value`                 | 添加一个string类型键值对       |
| `MSET key value [key value...]` | 批量添加多个string类型键值对   |
| `GET key`                       | 获取一个string类型的值         |
| `MGET key`                      | 获取多个string类型的值         |
| `APPEND key value`              | 对一个string键值对进行内容追加 |
| `SETEX key seconds value`       | 设置一个string键值对的时效性   |
| ...                             | ...                            |

#### 1.2.1.1. 整数运算
string类型存储单个字符串，如果value为一个整数形式，则可以对其进行整数相关操作，如redis提供了`incr`、`incrby`、`decr`等对整数形式的value进行运算，在运算时会将value转为数值类型进行运算，但底层的数据依然是以字符串的形式存储（redis是用C语言开发的，因此底层存储string用的是char[]）

string类型整数形式支持的最大值是9223372036854775807（在Java中为Long.MAX_VALUE）

#### 1.2.1.2. 时效性
redis提供对键值对存储时间的限制，过期自动删除。
- `SETEX key seconds value`：设置string键值对过期时间，以秒为单位
- `PSETEX key milliseconds value`：功能同上，以毫秒为单位



### 1.2.2. hash
在redis中，hash是多个string类型的field和value的映射表，是表示Objects的最合适的数据结构。
一个key对应一个hash结构，里面包括多个字段和对应的值。
例如，一个学生对象，包括学号、姓名、年龄等等。

```shell
127.0.0.1:6379> hmset user:20210001 name Tom age 22
OK
127.0.0.1:6379> hgetall user:20210001
1) "name"
2) "Tom"
3) "age"
4) "22"
127.0.0.1:6379> hmget user:20210001 name age
1) "Tom"
2) "22"
127.0.0.1:6379>
```

**`help @hash`**：查看hash数据结构的所有相关命令。

### 1.2.3. list

